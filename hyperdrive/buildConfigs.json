{
	"project": {
		"name": "aws-sdk-cpp",
		"type": "framework",
		"skipProjectTypes": [ "VisualStudio", "Makefile" ]
	},
	"platforms": {
		"macOS": {
			"projectType": "Xcode",
			"buildSteps": [
				{
					"name": "Run cmake",
					"shell": "/bin/zsh",
					"script": [
						"AWSSDKCPP_CLIENTS=\"lambda;s3\"",
						"AWSSDKCPP_BUILD_DIR=${PROJECT_DIR}/build/build-prod",
						"cd ${AWSSDKCPP_BUILD_DIR} ; cmake ../../.. -G Xcode -DCMAKE_BUILD_TYPE=\"MinSizeRel\" -DTARGET_ARCH=APPLE -DCMAKE_OSX_DEPLOYMENT_TARGET=\"10.13\" -DCMAKE_OSX_ARCHITECTURES=\"x86_64;arm64\" -DBUILD_ONLY=\"${AWSSDKCPP_CLIENTS}\" -DBUILD_SHARED_LIBS=OFF -DENABLE_RTTI=OFF -DENABLE_TESTING=OFF -DENABLE_ADDRESS_SANITIZER=OFF -DENABLE_SANITIZERS=OFF -DHAS_SANITIZERS=OFF -DENABLE_UNITY_BUILD=ON -DMINIMIZE_SIZE=ON"
					],
					"outputs": [
						"$(PROJECT_DIR)/build/build-prod/AWSSDK.xcodeproj"
					]
				},
				{
					"name": "Copy custom headers",
					"script": [
						"cp -p ${PROJECT_DIR}/aws-cpp-sdk-core/include/aws/core/SDKConfig.h ${PROJECT_DIR}/../aws-cpp-sdk-core/include/aws/core/SDKConfig.h",
						"cp -p ${PROJECT_DIR}/crt/aws-crt-cpp/include/aws/crt/Config.h ${PROJECT_DIR}/../crt/aws-crt-cpp/include/aws/crt/Config.h",
						"cp -p ${PROJECT_DIR}/crt/aws-crt-cpp/crt/aws-c-common/include/aws/common/config.h ${PROJECT_DIR}/../crt/aws-crt-cpp/crt/aws-c-common/include/aws/common/config.h"
					],
					"inputs": [
						"$(PROJECT_DIR)/aws-cpp-sdk-core/include/aws/core/SDKConfig.h",
						"$(PROJECT_DIR)/crt/aws-crt-cpp/include/aws/crt/Config.h",
						"$(PROJECT_DIR)/crt/aws-crt-cpp/crt/aws-c-common/include/aws/common/config.h"
					],
					"outputs": [
						"$(PROJECT_DIR)/../aws-cpp-sdk-core/include/aws/core/SDKConfig.h",
						"$(PROJECT_DIR)/../crt/aws-crt-cpp/include/aws/crt/Config.h",
						"$(PROJECT_DIR)/../crt/aws-crt-cpp/crt/aws-c-common/include/aws/common/config.h"
					]
				},
				{
					"name": "Build aws-sdk-cpp",
					"script": [
						"AWSSDKCPP_BUILD_DIR=${PROJECT_DIR}/build/build-prod"
						"cd ${AWSSDKCPP_BUILD_DIR} ; xcodebuild -target ALL_BUILD -enableAddressSanitizer NO -enableThreadSanitizer NO -enableUndefinedBehaviorSanitizer NO"
					],
					"inputs": [
						"$(PROJECT_DIR)/build/build-prod/AWSSDK.xcodeproj"
					],
					"outputs": [
						"$(PROJECT_DIR)/build/build-prod/aws-cpp-sdk-s3/Debug/libaws-cpp-sdk-s3.a",
						"$(PROJECT_DIR)/build/build-prod/aws-cpp-sdk-lambda/Debug/libaws-cpp-sdk-lambda.a"
					]
				},
				{
					"name": "Create XCFramework",
					"type": "create-xcframework",
					"headers": [
						"${PROJECT_DIR}/../aws-cpp-sdk-core/include",
						"${PROJECT_DIR}/../crt/aws-crt-cpp/include",
						"${PROJECT_DIR}/../crt/aws-crt-cpp/crt/aws-c-common/include",
						"${PROJECT_DIR}/../crt/aws-crt-cpp/crt/aws-c-io/include",
						"${PROJECT_DIR}/../crt/aws-crt-cpp/crt/aws-c-mqtt/include",
						"${PROJECT_DIR}/../aws-cpp-sdk-s3/include"
					],
					"libraries": [
						"${PROJECT_DIR}/build/build-prod/aws-cpp-sdk-core/Debug/libaws-cpp-sdk-core.a",
						"${PROJECT_DIR}/build/build-prod/aws-cpp-sdk-s3/Debug/libaws-cpp-sdk-s3.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/Debug/libaws-crt-cpp.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-checksums/Debug/libaws-checksums.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-auth/Debug/libaws-c-auth.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-cal/Debug/libaws-c-cal.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-common/Debug/libaws-c-common.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-compression/Debug/libaws-c-compression.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-http/Debug/libaws-c-http.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-io/Debug/libaws-c-io.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-mqtt/Debug/libaws-c-mqtt.a",
						"${PROJECT_DIR}/build/build-prod/crt/aws-crt-cpp/crt/aws-c-s3/Debug/libaws-c-s3.a",
						"${PROJECT_DIR}/build/build-prod/lib/Debug/libaws-c-event-stream.a"
					],
					"output": "${PROJECT_DIR}/build/aws-sdk-cpp.xcframework"
				}
			],
			"deploymentTarget": "10.13",
			"generateInfoPlistFile": true
		}
	},
	"configurations": {
		"Debug": {},
		"Release": {}
	}
}